{% extends "base.html" %}

{% block title %}Your Profile{% endblock %}

{% block content %}

<h1>Your Profile</h1>

<p>
<b>Username:</b> {{ user.username }}<br/>
<b>Email:</b> {{ user.email }}<br/>
</p>

{% if eveaccounts %}
<h2>External Service Accounts</h2>
<p>This is a list of all your current external service accounts, to 
create a login for a service click the Add Service link</p>
{% if srvaccounts %}
<table>
<thead>
<tr><th>Service</th><th>Username</th><th>URL</th><th>Active</th><th>Actions</th></tr>
</thead>
<tbody>
{% for acc in srvaccounts %}
<tr><td>{{ acc.service }}</td>
    <td>{{ acc.service_uid }}</td>
    <td><a href="{{ acc.service.url }}">{{ acc.service.url }}</a></td>
    <td>{% if acc.active %}Yes{% else %}No{% endif %}</td>
    <td><a href="/profile/del/service/{{ acc.id }}/">Delete</a>
    {% if acc.active %}
    &nbsp;/&nbsp;<a href="/profile/reset/service/{{ acc.id }}/">Reset</a>
    {% if acc.service.provide_login %}
    &nbsp;/&nbsp;<a href="/profile/login/service/{{ acc.id }}/">Login</a>
    {% endif %}
    {% endif %}
    </td>
</tr>
{% endfor %}
</tbody>
</table>
{% endif %}

<p>
<a href="/profile/add/service">Add Service</a>
</p>

<br/>
{% endif %}

<h2>Eve API Keys</h2>
<p>Adding a Eve API key will allow you to access any services allowed for your 
corporation. Limited keys are accepted for service validation. API keys 
are stored for on-going authentication. As the assigned owner of a key you may 
remove them at any time, but this may affect any existing services you have 
setup.</p>
{% if eveaccounts %}
<table>
<thead>
<tr><th>User ID</th><th>API Key</th><th>Description</th><th>Active</th><th>Last Updated</th><th>Actions</th></tr>
</thead>
<tbody>
{% for acc in eveaccounts %}
<tr><td>{{ acc.api_user_id }}</td>
    <td>{{ acc.api_key }}</td>
    <td>{{ acc.description }}</td>
    <td>{{ acc.api_status_description }}</td>
    <td>{{ acc.api_last_updated }}</td>
    <td><a href="/profile/refresh/eveapi/{{ acc.api_user_id }}/">Refresh</a>,&nbsp;
        <a href="/profile/del/eveapi/{{ acc.api_user_id }}/">Delete</a></td>
</tr>
</tbody>
{% endfor %}
</table>
{% endif %}
<p>
<a href="/profile/add/eveapi">Add a Eve API key</a>
</p>

<br/>

<h2>Reddit Accounts</h2>
<p>This is a list of all your current linked Reddit accounts</p>
{% if redditaccounts %}
<p>To verify your Reddit account, login on Reddit then click 
<a href="http://www.reddit.com/message/compose/?to=DredditVerification&subject=Verification">this link</a> and put your Auth username in the message.</p>
<table>
<thead>
<tr><th>Username</th><th>Created Date</th><th>Validated</th></tr>
</thead>
<tbody>
{% for acc in redditaccounts %}
<tr><td>{{ acc.username }}</td>
    <td>{{ acc.date_created }}</td>
    <td>{% if acc.validated %}Yes{% else %}No{% endif %}</td>
</tr>
{% endfor %}
</tbody>
</table>
{% endif %}
<p>
<a href="/profile/add/reddit">Add a Reddit account</a>
</p>

<p>If you encounter any errors during using this service, copy the massive 
error message into <a href="http://pastebin.com/">Pastebin</a> and give 
Matalok a good kicking on IRC/Jabber/Email or on the Forums.</p>
{% endblock %}
